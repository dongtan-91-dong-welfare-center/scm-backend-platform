# ===============================
# 서버 설정
# ===============================
server:
  port: 8080

# =============================== 
# Spring Application 설정
# ===============================
spring:
  application:
    name: scm

  # ===============================
  # 데이터소스 설정 (MySQL)
  # ===============================
  datasource:
    # MySQL JDBC 드라이버
    driver-class-name: com.mysql.cj.jdbc.Driver
    # MySQL 데이터베이스 URL ('scm' 데이터베이스가 미리 생성되어 있어야 합니다)
    url: jdbc:mysql://localhost:3306/scm?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
    # 데이터베이스 사용자 이름 및 비밀번호 (환경 변수 사용을 권장합니다)
    username: ${db.username}
    password: ${db.password}

  # ===============================
  # JPA & Hibernate 설정
  # ===============================
  jpa:
    hibernate:
      # DDL(Data Definition Language) 자동 생성 전략
      # create: 애플리케이션 시작 시 기존 테이블을 삭제하고 새로 생성 (개발용)
      # update: 변경된 스키마만 반영
      # validate: 엔티티와 테이블이 정상 매핑되었는지 검증
      # none: DDL 자동 생성 기능 사용 안 함 (운영 환경 권장)
      ddl-auto: create
    properties:
      hibernate:
        # 실행되는 SQL 쿼리를 콘솔에 출력
        show_sql: true
        # SQL 쿼리 가독성 향상을 위해 포맷팅
        format_sql: true
        # 자동 생성된 쿼리에 주석 추가
        use_sql_comments: true
        # MySQL용 Hibernate Dialect 설정
        dialect: org.hibernate.dialect.MySQLDialect
        # N+1 문제 해결을 위한 배치 사이즈 설정
        default_batch_fetch_size: 100

  # ===============================
  # 개발 도구 (DevTools) 설정
  # ===============================
  devtools:
    livereload:
      # 브라우저 자동 새로고침 기능 활성화
      enabled: true

  # ===============================
  # 정적 리소스 설정
  # ===============================
  web:
    resources:
      # 정적 리소스 (CSS, JS, 이미지 등) 위치
      static-locations: classpath:/static/

  # ===============================
  # 파일 업로드 설정
  # ===============================
  servlet:
    multipart:
      # 개별 파일의 최대 크기
      max-file-size: 20MB
      # 전체 요청의 최대 크기
      max-request-size: 60MB
      # 디스크에 파일을 쓰기 시작하는 임계값
      file-size-threshold: 30MB

# ===============================
# 커스텀 프로퍼티
# ===============================
# 파일 업로드 경로 설정
file:
  upload:
    # 업로드된 파일이 저장될 로컬 경로 (사용자 홈 디렉토리 기준)
    path: "uploads"
    # 외부에서 파일에 접근하기 위한 URL 경로
    url: "/uploads/"

# ===============================
# 로깅 레벨 설정
# ===============================
logging:
  level:
    # Hibernate가 바인딩하는 파라미터를 TRACE 레벨로 로깅
    org.hibernate.type: debug
    org.hibernate.orm.jdbc.bind: debug

# ===============================
# SpringDoc (Swagger UI) 설정
# ===============================
springdoc:
  # API 문서의 기본 정보 설정
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    # API 문서 제목
    title: "SCM API"
    # API 문서 설명
    description: "공급망 관리(SCM) 시스템을 위한 API 명세서"
    # API 버전
    version: "v1.0.0"
  # 문서화할 API 경로 설정 (기본값: 모든 경로)
  # /api/v1/ 하위의 모든 경로를 포함하도록 설정
  paths-to-match:
    - /api/v1/**